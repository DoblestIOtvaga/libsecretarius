/*** Generated by streamline 0.4.7 (callbacks) - DO NOT EDIT ***/ var __rt=require('streamline/lib/callbacks/runtime').runtime(__filename),__func=__rt.__func,__cb=__rt.__cb; (function() {
  var util, __indexOf = ([].indexOf || function(item) {
    for (var i = 0, l = this.length; (i < l); i++) { if (((i in this) && (this[i] === item))) { return i }; }; return -1;
  }), __hasProp = { }.hasOwnProperty, __extends = function(child, parent) {
    for (var key in parent) { if (__hasProp.call(parent, key)) { child[key] = parent[key]; }; }; function ctor() { this.constructor = child; }; ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  module.exports = function(host) {
    var Inbox, InfoCache, ModelObject, PGObject, getInfos, httprequest, inBrowser, model, port, r, request, updatecb, _this = this;

    if ((host == null)) {
      host = "http://localhost:3000"; } ;

    model = { };
    inBrowser = ((typeof window !== "undefined") && (window !== null));
    ModelObject = (function() {
      var cbs;

      function ModelObject() {
        var _this = this;
        this.emit = function(event, data) {
          return ModelObject.prototype.emit.apply(_this, arguments); }; };



      ModelObject.prototype.on = function(event, cb) {
        if ((this._cbs == null)) {
          this._cbs = { }; } ;

        if ((this._cbs[event] == null)) {
          this._cbs[event] = []; } ;

        if ((__indexOf.call(this._cbs[event], cb) < 0)) {
          return this._cbs[event].push(cb); } ; };



      ModelObject.prototype.emit = function(event, data) {
        var cb, _i, _len, _ref, _ref1, _results;
        if ((((((_ref = this._cbs) != null) ? _ref[event] : void 0)) != null)) {
          _ref1 = this._cbs[event];
          _results = [];
          for (_i = 0, _len = _ref1.length; (_i < _len); _i++) {
            cb = _ref1[_i];
            try {
              _results.push(cb.call(this, data));
            } catch (err) {
              this.removeCb(event, cb);
              _results.push(console.log(err.stack)); }; };


          return _results; } ; };



      ModelObject.prototype.removeCb = function(event, cb) {
        var elem;
        this._cbs[event] = (function() {
          var _i, _len, _ref, _results;
          _ref = this._cbs[event];
          _results = [];
          for (_i = 0, _len = _ref.length; (_i < _len); _i++) {
            elem = _ref[_i];
            if ((elem !== cb)) {
              _results.push(elem); } ; };


          return _results;
        }).call(this);
        if ((this._cbs[event] === [])) {
          delete this._cbs[event]; } ;

        return debug(event, "callback removed", this.constructor.name); };


      ModelObject.prototype.onChanged = function(cb) {
        return this.on("changed", cb); };


      ModelObject.prototype.onDeleted = function(cb) {
        return this.on("deleted", cb); };


      ModelObject.prototype.change = function(data) {
        return this.emit("changed", data); };


      ModelObject.prototype["delete"] = function() {
        return this.emit("deleted"); };


      cbs = { };

      ModelObject.on = function(event, cb) {
        var obj;
        if ((cbs[this.name] == null)) {
          cbs[this.name] = { }; } ;

        obj = cbs[this.name];
        if ((obj[event] == null)) {
          obj[event] = []; } ;

        if ((__indexOf.call(obj[event], cb) < 0)) {
          return obj[event].push(cb); } ; };



      ModelObject.emit = function(event, data) {
        var cb, _i, _len, _ref, _ref1, _results;
        if ((((((_ref = cbs[this.name]) != null) ? _ref[event] : void 0)) != null)) {
          _ref1 = cbs[this.name][event];
          _results = [];
          for (_i = 0, _len = _ref1.length; (_i < _len); _i++) {
            cb = _ref1[_i];
            try {
              _results.push(cb(data));
            } catch (err) {
              this.removeCb(event, cb);
              _results.push(console.log(err.stack)); }; };


          return _results; } ; };



      ModelObject.removeCb = function(event, cb) {
        var elem;
        cbs[this.name][event] = (function() {
          var _i, _len, _ref, _results;
          _ref = cbs[this.name][event];
          _results = [];
          for (_i = 0, _len = _ref.length; (_i < _len); _i++) {
            elem = _ref[_i];
            if ((elem !== cb)) {
              _results.push(elem); } ; };


          return _results;
        }).call(this);
        if ((cbs[this.name][event] === [])) {
          delete cbs[this.name][event]; } ;

        return debug(event, "callback removed", this.name); };


      ModelObject.onChanged = function(cb) {
        return this.on("changed", cb); };


      ModelObject.onDeleted = function(cb) {
        return this.on("deleted", cb); };


      ModelObject.change = function(data) {
        return this.emit("changed", data); };


      return ModelObject;

    })();
    InfoCache = (function() {

      function InfoCache() {
        this.infos = { }; };


      InfoCache.prototype.registerInfo = function(info) {
        return this.infos[info.id] = info; };


      InfoCache.prototype["delete"] = function(id) {
        if ((this.infos[id] != null)) {
          this.infos[id]["delete"]();
          return this.unregisterInfo(this.infos[id]); } ; };



      InfoCache.prototype.unregisterInfo = function(info) {
        if ((((info.id != null)) && ((this.infos[info.id] != null)))) {
          return delete this.infos[info.id]; } ; };



      InfoCache.prototype.updateInfo = function(values) {
        return this.storeInfo(values, true); };


      InfoCache.prototype.storeInfo = function(values, mustExist) {
        var info;
        if ((mustExist == null)) {
          mustExist = false; } ;

        if (!(((((info = this.infos[values.id]) != null)) || mustExist))) {
          info = new (util.findElement(values.type, model))(values.id);
          this.registerInfo(info); } ;

        return ((info != null) ? info._store(values) : void 0); };


      InfoCache.prototype.getInformation = util.singlify(function __1(_, id) { var __this = this; var __frame = { name: "__1", line: 199 }; return __func(_, this, arguments, __1, 0, __frame, function __$__1() { return (function __$__1(__then) {
            if ((((id != null)) && util.UUID_REG.test(id))) { return (function __$__1(__then) {
                if ((__this.infos[id] == null)) {
                  return new model.Information(id)._get(__cb(_, __frame, 3, 27, function ___(__0, __1) { __this.storeInfo(__1); __then(); }, true)); } else { __then(); } ; })(function __$__1() {

                return _(null, __this.infos[id]); }); } else {

              return _(null, null); } ; })(_); }); });



      return InfoCache;

    })();
    model.cache = new InfoCache;
    updatecb = function(data, name) {
      switch (name) {
      case "changed": return model.cache.updateInfo(data);
      case "inbox":
        return model.inbox._store(util.dummyCB, data);
      case "deleted":
        model.cache["delete"](data.id);
        return util.findElement(data.type, model).deleted(data.id);
      case "new":
        return util.findElement(data.type, model)["new"](data.id);
      }; };


    if (inBrowser) {
      port = new SharedWorker("events.js").port;
      port.addEventListener("message", function(event) {
        return updatecb(event.data.data, event.data.name); });

      port.start(); }
     else {
      r = require;
      r("./events")(updatecb); } ;

    getInfos = function getInfos__1(_, cls, filter, params) { var list, values, _i, _len; var __frame = { name: "getInfos__1", line: 237 }; return __func(_, this, arguments, getInfos__1, 0, __frame, function __$getInfos__1() {

        if ((params == null)) {
          params = { }; } ;

        params.filter = filter;
        return new cls()._get(__cb(_, __frame, 6, 13, function ___(__0, __1) { list = __1;
          for (_i = 0, _len = list.length; (_i < _len); _i++) {
            values = list[_i];
            model.cache.storeInfo(values); };

          return _(null, list); }, true), params); }); };

    if (inBrowser) {
      request = function(cb, type, data, url) {
        var options;
        options = {
          url: url,
          type: type,
          success: util.addNull(cb),
          dataType: "json" };

        if ((data != null)) {
          options.data = data; } ;

        return $.ajax(options); }; }

     else {
      httprequest = r("request");
      request = function request__2(_, type, data, url) { var options; var __frame = { name: "request__2", line: 266 }; return __func(_, this, arguments, request__2, 0, __frame, function __$request__2() {

          options = {
            method: type.toUpperCase(),
            url: ((("" + host) + "/") + url),
            json: true,
            form: data };

          return httprequest(options, __cb(_, __frame, 8, 15, function ___(__0, __2) { var __1 = __2.body; return _(null, __1); }, true)); }); }; } ;


    PGObject = (function(_super) {

      __extends(PGObject, _super);

      function PGObject(id) {
        this.id = id; };


      PGObject.prototype._get = function PGObject_prototype__get__1(_, data, url) { var __this = this; var __frame = { name: "PGObject_prototype__get__1", line: 285 }; return __func(_, this, arguments, PGObject_prototype__get__1, 0, __frame, function __$PGObject_prototype__get__1() {
          return __this._call(__cb(_, __frame, 1, 15, _, true), "get", data, url); }); };


      PGObject.prototype._put = function PGObject_prototype__put__2(_, data, url) { var __this = this; var __frame = { name: "PGObject_prototype__put__2", line: 289 }; return __func(_, this, arguments, PGObject_prototype__put__2, 0, __frame, function __$PGObject_prototype__put__2() {
          return __this._call(__cb(_, __frame, 1, 15, _, true), "put", data, url); }); };


      PGObject.prototype._delete = function PGObject_prototype__delete__3(_, url) { var __this = this; var __frame = { name: "PGObject_prototype__delete__3", line: 293 }; return __func(_, this, arguments, PGObject_prototype__delete__3, 0, __frame, function __$PGObject_prototype__delete__3() {
          return __this._call(__cb(_, __frame, 1, 15, _, true), "delete", url); }); };


      PGObject.prototype._patch = function PGObject_prototype__patch__4(_, data, url) { var __this = this; var __frame = { name: "PGObject_prototype__patch__4", line: 297 }; return __func(_, this, arguments, PGObject_prototype__patch__4, 0, __frame, function __$PGObject_prototype__patch__4() {
          return __this._call(__cb(_, __frame, 1, 15, _, true), "patch", data, url); }); };


      PGObject.prototype._post = function PGObject_prototype__post__5(_, data, url) { var __this = this; var __frame = { name: "PGObject_prototype__post__5", line: 301 }; return __func(_, this, arguments, PGObject_prototype__post__5, 0, __frame, function __$PGObject_prototype__post__5() {
          return __this._call(__cb(_, __frame, 1, 15, _, true), "post", data, url); }); };


      PGObject.prototype._call = function PGObject_prototype__call__6(_, type, data, url) { var __this = this; var __frame = { name: "PGObject_prototype__call__6", line: 305 }; return __func(_, this, arguments, PGObject_prototype__call__6, 0, __frame, function __$PGObject_prototype__call__6() {
          if ((url == null)) {
            url = __this._url(); } ;

          console.log((((((("" + (type.toUpperCase())) + " ") + url) + " (") + (((data != null) ? JSON.stringify(data) : ""))) + ")"));
          return request(__cb(_, __frame, 5, 15, _, true), type, data, url); }); };


      return PGObject;

    })(ModelObject);
    model.Information = (function(_super) {
      var ids;

      __extends(Information, _super);

      function Information(id) {
        this.id = id;
        this.values = false;
        this.type = "information"; };


      Information.prototype._create = function Information_prototype__create__1(_, args) { var __this = this; var __frame = { name: "Information_prototype__create__1", line: 327 }; return __func(_, this, arguments, Information_prototype__create__1, 0, __frame, function __$Information_prototype__create__1() {
          return __this._post(__cb(_, __frame, 1, 18, function ___(__0, __1) { __this.id = __1.id;
            model.cache.registerInfo(__this);
            return _(null, __this.id); }, true), args); }); };


      Information.prototype.addReference = function Information_prototype_addReference__2(_, reference) { var __this = this; var __frame = { name: "Information_prototype_addReference__2", line: 333 }; return __func(_, this, arguments, Information_prototype_addReference__2, 0, __frame, function __$Information_prototype_addReference__2() {
          return __this._patch(__cb(_, __frame, 1, 15, _, true), {
            method: "addReference",
            reference: reference.id }); }); };



      Information.prototype.removeReference = function Information_prototype_removeReference__3(_, reference) { var __this = this; var __frame = { name: "Information_prototype_removeReference__3", line: 340 }; return __func(_, this, arguments, Information_prototype_removeReference__3, 0, __frame, function __$Information_prototype_removeReference__3() {
          return __this._patch(__cb(_, __frame, 1, 15, _, true), {
            method: "removeReference",
            reference: reference.id }); }); };



      Information.prototype.getType = function Information_prototype_getType__4(_) { var __this = this; var __frame = { name: "Information_prototype_getType__4", line: 347 }; return __func(_, this, arguments, Information_prototype_getType__4, 0, __frame, function __$Information_prototype_getType__4() { return (function __$Information_prototype_getType__4(__then) {
            if ((__this.type == null)) {
              return __this._get(__cb(_, __frame, 2, 22, function ___(__0, __1) { __this.type = __1.type; __then(); }, true), {
                filter: "type" }); } else { __then(); } ; })(function __$Information_prototype_getType__4() {


            return _(null, __this.type); }); }); };


      Information.prototype.get = function Information_prototype_get__5(_) { var __this = this; var __frame = { name: "Information_prototype_get__5", line: 356 }; return __func(_, this, arguments, Information_prototype_get__5, 0, __frame, function __$Information_prototype_get__5() { return (function __$Information_prototype_get__5(__then) {
            if (!__this.values) {
              return __this._get(__cb(_, __frame, 2, 22, function ___(__0, __1) { __this._store(__1); __then(); }, true), values); } else { __then(); } ; })(function __$Information_prototype_get__5() { return _(null, __this); }); }); };




      Information.prototype.setStatus = function Information_prototype_setStatus__6(_, status) { var __this = this; var __frame = { name: "Information_prototype_setStatus__6", line: 363 }; return __func(_, this, arguments, Information_prototype_setStatus__6, 0, __frame, function __$Information_prototype_setStatus__6() {
          return __this._patch(__cb(_, __frame, 1, 15, _, true), {
            method: "setStatus",
            status: status }); }); };



      Information.prototype.setDelay = function Information_prototype_setDelay__7(_, delay) { var __this = this; var __frame = { name: "Information_prototype_setDelay__7", line: 370 }; return __func(_, this, arguments, Information_prototype_setDelay__7, 0, __frame, function __$Information_prototype_setDelay__7() {
          return __this._patch(__cb(_, __frame, 1, 15, _, true), {
            method: "setDelay",
            delay: delay }); }); };



      Information.prototype.attach = function Information_prototype_attach__8(_, file) { var __this = this; var __frame = { name: "Information_prototype_attach__8", line: 377 }; return __func(_, this, arguments, Information_prototype_attach__8, 0, __frame, function __$Information_prototype_attach__8() {
          return __this._patch(__cb(_, __frame, 1, 15, _, true), {
            method: "attach",
            file: file.id }); }); };



      Information.prototype.detach = function Information_prototype_detach__9(_, file) { var __this = this; var __frame = { name: "Information_prototype_detach__9", line: 384 }; return __func(_, this, arguments, Information_prototype_detach__9, 0, __frame, function __$Information_prototype_detach__9() {
          return __this._patch(__cb(_, __frame, 1, 15, _, true), {
            method: "detach",
            file: file.id }); }); };



      Information.prototype.getReferences = function Information_prototype_getReferences__10(_) { var __this = this; var __frame = { name: "Information_prototype_getReferences__10", line: 391 }; return __func(_, this, arguments, Information_prototype_getReferences__10, 0, __frame, function __$Information_prototype_getReferences__10() {
          return __this._get(__cb(_, __frame, 1, 15, _, true), {
            filter: "references" }); }); };



      Information.prototype._url = function() {
        return (("" + (((this.type != null) ? this.type : "information"))) + (((this.id != null) ? ("/" + this.id) : ""))); };


      Information.prototype._store = function(values) {
        var key, value;
        this.values = true;
        for (key in values) {
          value = values[key];
          this[key] = value; };

        return this.change(); };


      Information.getAll = util.singlify(function __11(_) { var all, info, __this = this; var __frame = { name: "__11", line: 411 }; return __func(_, this, arguments, __11, 0, __frame, function __$__11() {

          return getInfos(__cb(_, __frame, 2, 14, function ___(__0, __2) { all = __2;








            return (function __1(_) { var _i, _len, _results; _results = []; for (_i = 0, _len = all.length; (_i < _len); _i++) { info = all[_i]; _results.push(info.id); }; return _(null, _results); })(__cb(_, __frame, 11, 32, function ___(__0, __4) { var __3 = ids[__this.name] = __4; return _(null, __3); }, true)); }, true), __this, "all"); }); });


      ids = [];

      Information.getAllIDs = util.singlify(function __12(_) { var __this = this; var __frame = { name: "__12", line: 427 }; return __func(_, this, arguments, __12, 0, __frame, function __$__12() { return (function __$__12(__then) {
            if ((ids[__this.name] == null)) {
              return __this.getAll(__cb(_, __frame, 2, 10, __then, true)); } else { __then(); } ; })(function __$__12() {

            return _(null, ids[__this.name]); }); }); });


      Information["new"] = function(id) {
        if (ids[this.name]) {
          ids[this.name].push(id);
          return this.change(ids[this.name]); } ; };



      Information.deleted = function(id) {
        var i;
        if (ids[this.name]) {
          ids[this.name] = (function() {
            var _i, _len, _ref, _results;
            _ref = ids[this.name];
            _results = [];
            for (_i = 0, _len = _ref.length; (_i < _len); _i++) {
              i = _ref[_i];
              if ((i !== id)) {
                _results.push(i); } ; };


            return _results;
          }).call(this);
          return this.change(ids[this.name]); } ; };



      return Information;

    })(PGObject);
    "class File extends PGObject\n	create: (name) ->\n	getName: ->\n	delete: ->";
    model.Note = (function(_super) {

      __extends(Note, _super);

      function Note() {
        Note.__super__.constructor.apply(this, arguments);
        this.type = "note"; };


      Note.prototype.create = function Note_prototype_create__1(_, content, status) { var __this = this; var __frame = { name: "Note_prototype_create__1", line: 473 }; return __func(_, this, arguments, Note_prototype_create__1, 0, __frame, function __$Note_prototype_create__1() {
          if ((status == null)) {
            status = "inbox"; } ;

          return __this._create(__cb(_, __frame, 4, 15, _, true), {
            content: content,
            status: status }); }); };



      Note.prototype.setContent = function Note_prototype_setContent__2(_, content) { var __this = this; var __frame = { name: "Note_prototype_setContent__2", line: 483 }; return __func(_, this, arguments, Note_prototype_setContent__2, 0, __frame, function __$Note_prototype_setContent__2() {
          return __this._patch(__cb(_, __frame, 1, 15, _, true), {
            method: "setContent",
            content: content }); }); };



      return Note;

    })(model.Information);
    model.Task = (function(_super) {

      __extends(Task, _super);

      function Task() {
        Task.__super__.constructor.apply(this, arguments);
        this.type = "task"; };


      Task.prototype.done = function Task_prototype_done__1(_) { var __this = this; var __frame = { name: "Task_prototype_done__1", line: 502 }; return __func(_, this, arguments, Task_prototype_done__1, 0, __frame, function __$Task_prototype_done__1() {
          return __this._patch(__cb(_, __frame, 1, 15, _, true), {
            method: "done" }); }); };



      Task.prototype.undo = function Task_prototype_undo__2(_) { var __this = this; var __frame = { name: "Task_prototype_undo__2", line: 508 }; return __func(_, this, arguments, Task_prototype_undo__2, 0, __frame, function __$Task_prototype_undo__2() {
          return __this._patch(__cb(_, __frame, 1, 15, _, true), {
            method: "undo" }); }); };



      Task.prototype.setParent = function Task_prototype_setParent__3(_, parent) { var __this = this; var __frame = { name: "Task_prototype_setParent__3", line: 514 }; return __func(_, this, arguments, Task_prototype_setParent__3, 0, __frame, function __$Task_prototype_setParent__3() {
          return __this._patch(__cb(_, __frame, 1, 15, _, true), {
            parent: ((parent != null) ? parent.id : void 0),
            method: "setParent" }); }); };



      Task.prototype.setDeadline = function Task_prototype_setDeadline__4(_, deadline) { var __this = this; var __frame = { name: "Task_prototype_setDeadline__4", line: 521 }; return __func(_, this, arguments, Task_prototype_setDeadline__4, 0, __frame, function __$Task_prototype_setDeadline__4() {
          return __this._patch(__cb(_, __frame, 1, 15, _, true), {
            method: "setDeadline",
            deadline: deadline }); }); };



      Task.prototype.setDescription = function Task_prototype_setDescription__5(_, description) { var __this = this; var __frame = { name: "Task_prototype_setDescription__5", line: 528 }; return __func(_, this, arguments, Task_prototype_setDescription__5, 0, __frame, function __$Task_prototype_setDescription__5() {
          return __this._patch(__cb(_, __frame, 1, 15, _, true), {
            method: "setDescription",
            description: description }); }); };



      return Task;

    })(model.Information);
    model.Project = (function(_super) {

      __extends(Project, _super);

      function Project() {
        Project.__super__.constructor.apply(this, arguments);
        this.type = "project"; };


      Project.prototype.create = function Project_prototype_create__1(_, description, referencing, parent) { var __this = this; var __frame = { name: "Project_prototype_create__1", line: 547 }; return __func(_, this, arguments, Project_prototype_create__1, 0, __frame, function __$Project_prototype_create__1() {
          if ((referencing == null)) {
            referencing = null; } ;

          if ((parent == null)) {
            parent = null; } ;

          return __this._create(__cb(_, __frame, 7, 15, _, true), {
            description: description,
            referencing: ((referencing != null) ? referencing.id : void 0),
            parent: ((parent != null) ? parent.id : void 0) }); }); };



      Project.prototype.collapse = function Project_prototype_collapse__2(_) { var __this = this; var __frame = { name: "Project_prototype_collapse__2", line: 561 }; return __func(_, this, arguments, Project_prototype_collapse__2, 0, __frame, function __$Project_prototype_collapse__2() {
          return __this._patch(__cb(_, __frame, 1, 15, _, true), {
            method: "collapse" }); }); };



      Project.prototype.uncollapse = function Project_prototype_uncollapse__3(_) { var __this = this; var __frame = { name: "Project_prototype_uncollapse__3", line: 567 }; return __func(_, this, arguments, Project_prototype_uncollapse__3, 0, __frame, function __$Project_prototype_uncollapse__3() {
          return __this._patch(__cb(_, __frame, 1, 15, _, true), {
            method: "uncollapse" }); }); };



      return Project;

    })(model.Task);
    model.Asap = (function(_super) {

      __extends(Asap, _super);

      function Asap() {
        Asap.__super__.constructor.apply(this, arguments);
        this.type = "asap"; };


      Asap.prototype.create = function Asap_prototype_create__1(_, description, list, referencing, project) { var __this = this; var __frame = { name: "Asap_prototype_create__1", line: 585 }; return __func(_, this, arguments, Asap_prototype_create__1, 0, __frame, function __$Asap_prototype_create__1() {
          if ((referencing == null)) {
            referencing = null; } ;

          if ((project == null)) {
            project = null; } ;

          return __this._create(__cb(_, __frame, 7, 15, _, true), {
            description: description,
            list: list.id,
            referencing: ((referencing != null) ? referencing.id : void 0),
            project: ((project != null) ? project.id : void 0) }); }); };



      Asap.prototype.setList = function Asap_prototype_setList__2(_, list) { var __this = this; var __frame = { name: "Asap_prototype_setList__2", line: 600 }; return __func(_, this, arguments, Asap_prototype_setList__2, 0, __frame, function __$Asap_prototype_setList__2() {
          return __this._patch(__cb(_, __frame, 1, 15, _, true), {
            list: list.id,
            method: "setList" }); }); };



      return Asap;

    })(model.Task);
    model.AsapList = (function(_super) {

      __extends(AsapList, _super);

      function AsapList() {
        AsapList.__super__.constructor.apply(this, arguments);
        this.type = "asaplist"; };


      AsapList.prototype.create = function AsapList_prototype_create__1(_, name) { var __this = this; var __frame = { name: "AsapList_prototype_create__1", line: 619 }; return __func(_, this, arguments, AsapList_prototype_create__1, 0, __frame, function __$AsapList_prototype_create__1() {
          return __this._create(__cb(_, __frame, 1, 15, _, true), {
            name: name }); }); };



      AsapList.prototype.rename = function AsapList_prototype_rename__2(_, name) { var __this = this; var __frame = { name: "AsapList_prototype_rename__2", line: 625 }; return __func(_, this, arguments, AsapList_prototype_rename__2, 0, __frame, function __$AsapList_prototype_rename__2() {
          return __this._patch(__cb(_, __frame, 1, 15, _, true), {
            method: "rename",
            name: name }); }); };



      return AsapList;

    })(model.Information);
    "class model.SocialEntity extends model.Information\n	create: ->\n		\nclass Circle extends SocialEntity\n	create: (name) ->\n	@getByName: (name) =>\n	rename: (name) ->\n\nclass Contact extends SocialEntity\n	create: (nameMap) ->\n	setValues: (nameMap) ->\n	addAccount: (account, description=null, priority=0) ->\n	removeAccount: (account) ->\n	addAddress: (place, description=null) ->\n	removeAddress: (place) ->\n	enterCircle: (circle) ->\n	leaveCircle: (circle) ->\n\nclass Place extends Information\n\n	create: (valueMap) ->\n\n	setValues: (valueMap) ->\n	setParent: (place) ->\n	removeParent: ->\n\nclass Appointment extends Information\n\n	create: (description, date, time=null, length=null, referencing=null) ->\n\n	setValues: (valueMap) ->\n	\n	setPlace: (place) ->\n\n	addException: (appointment, exceptionMove='no') ->\n	removeException: (appointment) ->\n\n	addFilter: (type, value) ->\n	removeFilter: (type, value) ->\n\n	addParticipant: (participant) ->\n	removeParticipant: (participant) ->\n\nclass Protocol extends PGObject\n	@find: (name) ->\n	delete: ->\n\nclass Server extends PGObject\n	@find: (name, protocol) ->\n	delete: ->\n\nclass Communicator extends Information\n	create: (username, server) ->\n	changeServer: (server) ->\n	setValues: (valueMap) ->\n\nclass Account extends Communicator\n	create: (username, server) ->\n	@find: (username, server) ->\n	join: (room, role=null) ->\n	leave: (room, role=null) ->\n\nclass UserAccount extends Account\n	setValues: ->\n	create: (account) ->\n	downGrade: ->\n	@getAll: ->\n\nclass Room extends Communicator\n	create: (name) ->\n	setMOTD: (motd) ->\n\nclass Communication extends Information\n	create: (from, time=new Date()) ->\n	setSender: (from) ->\n	setTime: (time=new Date()) ->\n	send: ->\n	sent: ->\n	draft: ->\n	addRecipient: (recipient, mode, resource=null) ->\n	removeRecipient: (recipient, mode) ->\n	getToSend: (from) ->\n\nclass Message extends Communication\n	create: (from, subject=null, body=null, time=new Date()) ->\n	setValues: (valueMap) ->\n\nclass Presence extends Communication\n	create: (from, time=new Date()) ->\n	addResource: (resource) ->\n\nclass Resource extends PGObject\n	create: (name, status, message) ->\n	delete: ->\n\nclass Daemon extends PGObject\n	registrate: (name, status) ->\n	setStatus: (status) ->\n	setMessage: (message) ->\n	deregistrate: ->\n	@getAll: ->\n\nclass Maybe extends PGObject\n	getSize: ->\n	getList: ->";
    Inbox = (function(_super) {

      __extends(Inbox, _super);

      function Inbox() {
        return Inbox.__super__.constructor.apply(this, arguments); };


      Inbox.prototype.getSize = function Inbox_prototype_getSize__1(_) { var __this = this; var __frame = { name: "Inbox_prototype_getSize__1", line: 644 }; return __func(_, this, arguments, Inbox_prototype_getSize__1, 0, __frame, function __$Inbox_prototype_getSize__1() {
          return __this.get(__cb(_, __frame, 1, 15, function ___(__0, __2) { var __1 = __2.size; return _(null, __1); }, true)); }); };


      Inbox.prototype.getFirst = function Inbox_prototype_getFirst__2(_) { var __this = this; var __frame = { name: "Inbox_prototype_getFirst__2", line: 648 }; return __func(_, this, arguments, Inbox_prototype_getFirst__2, 0, __frame, function __$Inbox_prototype_getFirst__2() {
          return __this.get(__cb(_, __frame, 1, 15, function ___(__0, __2) { var __1 = __2.first; return _(null, __1); }, true)); }); };


      Inbox.prototype.get = util.singlify(function __3(_) { var __this = this; var __frame = { name: "__3", line: 652 }; return __func(_, this, arguments, __3, 0, __frame, function __$__3() { return (function __$__3(__then) {
            if ((__this.values == null)) {
              return __this._get(__cb(_, __frame, 2, 25, function ___(__0, __1) { return __this._store(__cb(_, __frame, 2, 10, __then, true), __1); }, true), null, "inbox"); } else { __then(); } ; })(function __$__3() {

            return _(null, __this.values); }); }); });


      Inbox.prototype._store = function Inbox_prototype__store__4(_, values) { var __this = this; var __frame = { name: "Inbox_prototype__store__4", line: 659 }; return __func(_, this, arguments, Inbox_prototype__store__4, 0, __frame, function __$Inbox_prototype__store__4() {
          __this.values = values;
          return _(null, __this.change(__this.values)); }); };


      return Inbox;

    })(PGObject);
    "class Urgent extends PGObject\n	 getSize: ->\n	 getList: ->";
    model.inbox = new Inbox;
    return model; };


  module.exports.util = util = require("./util");

}).call(this);